

    Explore
    Gist
    Blog
    Help

    m1lth14d3s

    2
    12
    3

public Godin/sonar-native-packages

sonar-native-packages / deb / debian / sonar.init
Godin 2 years ago
Improve detection of 32/64

1 contributor
file 67 lines (57 sloc) 1.077 kb
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 	

#!/bin/sh
### BEGIN INIT INFO
# Provides: sonar
# Required-Start: $local_fs $remote_fs $network $time $named
# Required-Stop: $local_fs $remote_fs $network $time $named
# Default-Start: 3 5
# Default-Stop: 0 1 2 6
# Short-Description: Sonar
# Description: Open platform to manage code quality
### END INIT INFO

NAME=sonar
SCRIPTNAME=/etc/init.d/$NAME

if [ `id -u` -ne 0 ]; then
  echo "The $NAME init script can only be run as root"
  exit 1
fi

MACHINE_TYPE=`getconf LONG_BIT`
if [ "${MACHINE_TYPE}" = "64" ]; then
  JSW=/<%= node['sonar']['dir'] %>/bin/linux-x86-64/sonar.sh
else
  JSW=/<%= node['sonar']['dir'] %>/bin/linux-x86-32/sonar.sh
fi

do_start()
{
  su sonar -c "$JSW start"
}

do_stop()
{
  su sonar -c "$JSW stop"
}

do_status()
{
  su sonar -c "$JSW status"
}

do_restart()
{
  su sonar -c "$JSW restart"
}

case "$1" in
  start)
    do_start
    ;;
  stop)
    do_stop
    ;;
  status)
    do_status
    ;;
  restart|force-reload)
    do_restart
    ;;
  *)
    echo "Usage: $SCRIPTNAME {start|stop|status|restart|force-reload}" >&2
    exit 3
    ;;
esac

exit 0

    Status
    API
    Training
    Shop
    Blog
    About

    Â© 2013 GitHub, Inc.
    Terms
    Privacy
    Security
    Contact

